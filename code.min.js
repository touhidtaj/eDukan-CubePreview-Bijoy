let curX,curY,startX,startY,curso=document.getElementById("curso"),dragedX=0,dragedY,dragX=0,dragY,lDragX,lDragY,delX=0,delY,ftDrag=!1,ctx1,ctx2,ctx3,ctx4,canvas,def={drag:{x:0},rot:{cur:{x:0,y:0,z:0},start:{active:!0,x:0,y:0,z:0,inc:{x:.1,y:1,z:-.1}},main:{x:0,y:0,z:0},sum:{x:0,y:0,z:0},add:{x:0,y:0,z:0}},scale:{start:.37,x:.7,y:.37,z:.37},pos:{y:10,levYamm:40},imag:["pic1","pic2","pic3","pic4"],phase:{cur:0},curPic:0,totPic:4};function init(){initDrag(),myDrags[0][0].disable(),initAnim(),rotLoop()}function randomIntFromInterval(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function changePic(){var t=".pic"+(def.curPic+1);TweenMax.set(t,{opacity:0,visibility:"hidden"}),def.curPic++;var t=".pic"+randomIntFromInterval(2,4);TweenMax.set(t,{opacity:1,visibility:"visible"})}var yTween,sTween,objects={adArea:document.getElementById("adArea"),c1:document.getElementById("c1"),c2:document.getElementById("c2")},ss=.7,s1=0,s0=0,addY=-20;function initAnim(){new TimelineMax({repeat:-1}),TweenMax.set(".csf",{scale:.995}),TweenMax.set(objects.c1,{scaleX:s0,scaleZ:s0,scaleY:s0,y:0}),TweenMax.from(objects.c1,1.5,{y:-300,ease:Back.easeOut.config(2),onComplete:function(){}}),TweenMax.to(objects.c1,2,{scaleX:ss,scaleZ:ss,scaleY:ss,ease:Power2.easeInOut,onComplete:function(){curso.style.opacity=1,setTimeout(function(){zoomOut()},0)}}),TweenMax.from(def.rot.start,2,{x:55,y:88,z:111,ease:Power2.easeOut})}function zoomOut(){TweenMax.to(nAdd,1,{delay:.5,y:-15,ease:Power1.easeInOut}),objects.shadow.style.visibility="hidden",objects.shadow.style.height="300px",def.phase.cur=1,sTween=TweenMax.to(def.scale,2.3,{x:.55,y:.55,z:.55,ease:Power2.easeInOut}),yTween=TweenMax.to(def.pos,1.3,{y:def.pos.levYamm/2,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(def.rot.main,1,{y:.5,ease:Power1.easeInOut}),cur=0,myDrags[0][0].enable()}var rWiggle=0,cur=0,dragAmm=0,newDel=0,nAdd={y:-10};function rotLoop(){var t=(dragX*=.95)-delX;delX+=t/10;var t=dragAmm+curDragX-newDel;if(newDel+=t/10,0==def.phase.cur)TweenMax.set(objects.c1,{rotationX:def.rot.start.x,rotationY:def.rot.start.y,rotationZ:def.rot.start.z});else if(1==def.phase.cur){cur+=.09,rWiggle=.2*Math.cos(.1*cur);var e=def.rot.start.y+rWiggle+.1*delX;def.rot.cur.x=def.rot.add.x,def.rot.cur.y+=e,def.rot.cur.z=def.rot.add.z;var a=Math.abs(.01*delX);a>40&&(a=40);var s=2.5*(def.scale.x-a);s<0&&(s=0);var o=.4*s;TweenMax.set(objects.shadow,{opacity:o,scaleX:s,scaleZ:s,scaleY:s}),TweenMax.set(objects.c1,{scaleX:.7,scaleY:.7,scaleZ:.7,rotationX:def.rot.cur.x,rotationY:def.rot.cur.y,rotationZ:def.rot.cur.z,y:def.pos.y+nAdd.y})}def.rot.start.active,lDragX=dragX,requestAnimFrame(rotLoop)}function checkIfHideEl(t,e,a,s,o){(arot=Math.abs(t))<90||arot>270?hideEl(o,0):hideEl(o,1),t>180||t>-180&&t<0?hideEl(s,0):hideEl(s,1),arot<90||arot>270?hideEl(a,1):hideEl(a,0),t<=0&&t>-180||t>180?hideEl(e,1):hideEl(e,0)}function hideEl(t,e){t.style.opacity!=e&&TweenMax.set(t,{opacity:e})}var myDrags=[];function initDrag(){myDrags.push(addDraggable("#dragArea"))}function addDraggable(t){return Draggable.create(t,{cursor:"pointer",dragResistance:0,edgeResistance:0,throwProps:!0,onClick:function(){onClick(this)},onPress:function(){onPress(this)},onDrag:function(t){onDrag(this)},onDragEnd:function(t){onDragEnd(this)},onRelease:function(t){onRelease(this)}})}function onClick(t){ctaFunction()}function onPress(t){startX=0,startY=0,ftDrag||(ftDrag=!0)}var lastDx=0,curDragX=0;function onDrag(t,e,a,s,o,r,n){curso.style.visibility="hidden",curX=startX+t.x,curY=startY+t.y,dragX+=curX-lastDx,curDragX=curX,lastDx=curX}function onDragEnd(t,e,a,s){}function onRelease(t,e){dragAmm+=curDragX,curDragX=0,lastDx=0,dragedX+=curX,TweenMax.set(t.target,{x:0,y:0,left:0,top:0})}function getCssProperty(t,e){var a=document.getElementById(t);return parseInt(window.getComputedStyle(a,null).getPropertyValue(e))}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)};var assetsCur=0,assetsTotal=0,allLoaded=!1,swipe_allowed=!1;function initLoad(){loadAsset(assets.init)}function loadOther(){for(var t in assetsTotal=Object.size(assets),assets)"init"!=t&&loadAsset(assets[t])}function loadMid(){loadAsset(assets.mid)}function loadEnd(){loadAsset(assets.end)}function loadAsset(t){t.cur_asset_pack=0,t.asset_packs=t.length;for(var e=0;e<t.asset_packs;e++){var a=t[e].names.split(" ");t[e].curLoad=0;for(var s=0;s<a.length;s++){var o=new Image;o.myCustomData={total:a.length,a:t,name:a[s],numb:e},o.onload=function(){objects[this.myCustomData.name]=document.getElementById(this.myCustomData.name);var t,e=this.myCustomData.a[this.myCustomData.numb].type,a=1;"class"==e&&(objects[this.myCustomData.name]=document.getElementsByClassName(this.myCustomData.name),a=objects[this.myCustomData.name].length);for(var s=0;s<a;s++)if("class"==e?(t=objects[this.myCustomData.name][s]).style.backgroundImage="url("+this.src+")":"id"==e?(t=objects[this.myCustomData.name]).style.backgroundImage="url("+this.src+")":"src"==e&&(t=objects[this.myCustomData.name],objects[this.myCustomData.name].src=this.src),t.style.position="absolute",t.style.width="300px",t.style.height="250px",t.style.backgroundRepeat="no-repeat",t.style.backgroundSize="300px 250px",1!=this.myCustomData.a[this.myCustomData.numb].scale){var o=1/this.myCustomData.a[this.myCustomData.numb].scale;TweenMax.set(t,{scale:o,transformOrigin:"0% 0%"})}countAsset(this.myCustomData.a,this.myCustomData.numb,this.myCustomData.total)},o.src=assets_url+a[s]+"."+t[e].format}}}function countAsset(t,e,a){t[e].curLoad++,t[e].curLoad==a&&(t.cur_asset_pack++,t.cur_asset_pack==t.asset_packs&&assetSetLoaded())}function assetSetLoaded(){1==++assetsCur?(TweenMax.to(objects.adArea,.3,{delay:.05,opacity:1}),init(),loadOther()):assetsCur==assetsTotal&&(allLoaded=!0)}Object.size=function(t){var e,a=0;for(e in t)t.hasOwnProperty(e)&&a++;return a},window.addEventListener?window.addEventListener("load",initLoad(),!1):window.attachEvent&&window.attachEvent("onload",initLoad());